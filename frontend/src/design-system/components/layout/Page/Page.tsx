// frontend/src/design-system/components/layout/Page/Page.tsx
import type { HTMLAttributes, ReactNode } from 'react';
import { Inline } from '../Inline/Inline';
import './Page.css';

export type PageSpacing = 'none' | 'sm' | 'md' | 'lg';
export type PageHeaderAlign = 'start' | 'center';

export type PageProps = {
  /**
   * Primary page heading area.
   * Usually a Typography/Heading component.
   */
  title?: ReactNode;

  /**
   * Optional description or supporting text under the title.
   */
  description?: ReactNode;

  /**
   * Optional actions aligned with the header (e.g. buttons/links).
   */
  actions?: ReactNode;

  /**
   * Main page content.
   */
  children: ReactNode;

  /**
   * Controls vertical spacing between header and body,
   * and overall page padding. Hooks into CSS spacing tokens.
   */
  spacing?: PageSpacing;

  /**
   * Alignment of the header block (title + description + actions).
   */
  headerAlign?: PageHeaderAlign;

  className?: string;
} & Omit<HTMLAttributes<HTMLDivElement>, 'className' | 'children'>;

export function Page({
  title,
  description,
  actions,
  children,
  spacing = 'md',
  headerAlign = 'start',
  className,
  ...rest
}: PageProps) {
  const hasHeader = title || description || actions;

  const rootClassName = [
    'ui-page',
    `ui-page--spacing-${spacing}`,
    `ui-page--header-align-${headerAlign}`,
    className,
  ]
    .filter(Boolean)
    .join(' ');

  return (
    <div className={rootClassName} {...rest}>
      {hasHeader ? (
        <header className="ui-page__header">
          <div className="ui-page__header-main">
            {title ? <div className="ui-page__title">{title}</div> : null}
            {description ? <div className="ui-page__description">{description}</div> : null}
          </div>

          {actions ? (
            <div className="ui-page__header-actions">
              <Inline
                gap="sm"
                align="center"
                justify={headerAlign === 'center' ? 'center' : 'end'}
                wrap
              >
                {actions}
              </Inline>
            </div>
          ) : null}
        </header>
      ) : null}

      <div className="ui-page__body">{children}</div>
    </div>
  );
}
